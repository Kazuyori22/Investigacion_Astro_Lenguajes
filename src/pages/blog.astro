---
const url = new URL(Astro.request.url);
const title = url.searchParams.get("title");
---

<head>
  <script>
    interface Blog {
      title: string;
      content: string;
      date: string;
      image: string;
    }
    document.addEventListener("DOMContentLoaded", () => {
      const params = new URLSearchParams(window.location.search);
      const title = params.get("title");
      const blogs = JSON.parse(localStorage.getItem("blogs") || "[]");
      const blog = blogs.find((b: Blog) => b.title === title);

      // Obtener elementos una sola vez
      const blogTitle = document.getElementById("blog-title");
      const blogImage = document.getElementById("blog-image");
      const blogContent = document.getElementById("blog-content");

      if (!blog) {
        if (blogContent) {
          const notFoundMessage = document.createElement("h2");
          notFoundMessage.textContent = "Blog no encontrado";
          blogContent.appendChild(notFoundMessage);
        }
        return;
      }

      if (blogTitle) blogTitle.textContent = blog.title;
      if (blogImage && blog.image)
        blogImage.setAttribute("src", `/assets/${blog.image}`);
      if (blogContent) {
        blogContent.innerHTML = ""; // Limpiar contenido previo
        const paragraph = document.createElement("p");
        paragraph.textContent = blog.content;
        blogContent.appendChild(paragraph);
      }
    });
  </script>
</head>

<video autoplay muted loop id="background-video">
  <source src="/assets/fondo5.mp4" type="video/mp4" />
  Tu navegador no soporta el formato de video.
</video>

<div class="blog-container">
  <article class="blog-page">
    <h1 id="blog-title"></h1>
    <img id="blog-image" src="" alt="" />
    <div id="blog-content"></div>
  </article>
</div>

<style>
  /* Fondo de video */
  #background-video {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: -1;
  }

  /* Contenedor principal para el blog */
  .blog-container {
    display: flex;
    justify-content: center;
    min-height: 100vh;
    background: rgba(
      255,
      255,
      255,
      0.445
    ); /* Oscurece el fondo para mejorar legibilidad */
    padding: 20px;
    /* border-radius: 10%; */
  }
  h1 {
    font-size: 40px;
    color: #05407a; /* Color del t√≠tulo */
    margin-bottom: 10px;
  }

  #blog-content {
    font-size: 40px;
    color: #34495e; /* Color del contenido */
    margin-top: 10px;
    margin-bottom: 10px;
  }
  img {
    width: 100%;
     margin-top: 10px;
    margin-bottom: 20px;
  }
</style>
